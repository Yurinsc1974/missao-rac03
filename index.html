<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projects Overview</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous"/>
  <meta http-equiv="Cache-Control" content="no-store" />
</head>
<body>
  <header class="topbar">
    <button class="icon">‚ò∞</button>
    <h1>MY DASHBOARD</h1>
    <nav class="icons">
      <span>üîí</span><span>üë§</span><span>‚öôÔ∏è</span>
    </nav>
  </header>

  <main class="container">
    <h2>Projects Overview</h2>

    <!-- Slicers (filtros) -->
    <section class="card toolbar">
      <div class="field">
        <label>√Årea</label>
        <select id="selArea" multiple size="4"></select>
        <small>Dica: use Ctrl/‚åò para multi‚Äësele√ß√£o</small>
      </div>
      <div class="field">
        <label>Data (ou Marco)</label>
        <select id="selData"></select>
      </div>
      <div class="field actions">
        <label>&nbsp;</label>
        <button id="btnClear">Limpar filtros</button>
        <button id="btnReload">Recarregar</button>
      </div>
    </section>

    <!-- Linha com 3 gr√°ficos -->
    <section class="grid-3">
      <div class="card">
        <div class="card-title">Previsto x Real x Masterplan</div>
        <canvas id="chartPRM" height="160"></canvas>
      </div>
      <div class="card">
        <div class="card-title">Curva S (Cumulativa)</div>
        <canvas id="chartCurvaS" height="160"></canvas>
      </div>
      <div class="card">
        <div class="card-title">Desvio vs Custo</div>
        <canvas id="chartDesvioCusto" height="160"></canvas>
      </div>
    </section>

    <!-- Card 4D -->
    <section class="card">
      <div class="card-title">Simula√ß√£o 4D por √Årea</div>
      <div class="legend">
        <span class="sw sw-blue"></span> Previsto
        <span class="sw sw-green"></span> Real (adiantado/dentro)
        <span class="sw sw-lilac"></span> Masterplan
        <span class="sw sw-yellow"></span> Atraso
        <div class="stretch"></div>
        <button id="btnPlay">‚ñ∂Ô∏è Play</button>
        <input id="rngStep" type="range" min="0" max="0" step="1" value="0" />
        <span id="lblStep" class="muted">‚Äì</span>
      </div>
      <div id="vis4d" class="vis4d">
        <div id="tt" class="tooltip"></div>
      </div>
    </section>

    <!-- Fatos relevantes + Mapa -->
    <section class="grid-2">
      <div class="card">
        <div class="card-title">Mapa de Projetos</div>
        <div id="map" class="map"></div>
      </div>
      <div class="card">
        <div class="card-title">Fatos Relevantes</div>
        <ol id="timeline" class="timeline"></ol>
      </div>
    </section>

    <details class="card">
      <summary>Preview (debug)</summary>
      <pre id="log">Aguardando‚Ä¶</pre>
    </details>
  </main>

  <!-- Bibliotecas sem SRI -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" crossorigin="anonymous" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js" crossorigin="anonymous" defer></script>
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous" defer></script>

  <!-- App -->
  <script src="js/loadExcel.js" defer></script>
  <script src="js/vis4d.js" defer></script>
  <script src="js/map.js" defer></script>
  <script src="js/app.js" defer></script>
</body>
</html>
